<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THE BARBER CLUB | Reservas Online Premium</title>
    
    <meta name="description" content="Reserva tu cita en la mejor barbería. Estilo y precisión.">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    
    <style>
        :root {
            --gold: #C5A059;
            --dark: #0A0A0A;
            --dark-soft: #161616;
            --white: #F5F5F5;
            --gray: #888;
            --transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: var(--dark); color: var(--white); font-family: 'Inter', sans-serif; scroll-behavior: smooth; }
        h1, h2 { font-family: 'Playfair Display', serif; }

        /* HEADER */
        header { position: absolute; width: 100%; padding: 30px; z-index: 100; display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 1.5rem; font-weight: 900; letter-spacing: 4px; color: var(--white); }

        /* HERO */
        .hero {
            height: 100vh;
            background: linear-gradient(rgba(0,0,0,0.8), rgba(0,0,0,0.8)), url('https://images.unsplash.com/photo-1585747860715-2ba37e788b70?q=80&w=2074&auto=format&fit=crop');
            background-size: cover; background-position: center;
            display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center;
        }

        .hero h1 { font-size: clamp(3rem, 10vw, 6rem); margin-bottom: 20px; }

        /* BOTONES */
        .btn-gold {
            background: var(--gold); color: var(--dark); padding: 18px 35px;
            border-radius: 4px; text-decoration: none; font-weight: 800;
            text-transform: uppercase; letter-spacing: 2px; border: 1px solid var(--gold);
            cursor: pointer; transition: var(--transition); display: inline-block;
        }
        .btn-gold:hover { background: transparent; color: var(--gold); transform: translateY(-3px); }

        /* SERVICIOS */
        .section { padding: 100px 20px; max-width: 1200px; margin: 0 auto; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; }
        
        .service-card {
            background: var(--dark-soft); padding: 40px; border: 1px solid #222;
            transition: var(--transition); text-align: center;
        }
        .service-card:hover { border-color: var(--gold); transform: scale(1.02); }
        .service-price { font-size: 2rem; font-weight: 800; color: var(--gold); display: block; margin: 15px 0; }

        /* RESERVAS */
        .booking-container { background: var(--dark-soft); padding: 40px; border-radius: 8px; box-shadow: 0 20px 40px rgba(0,0,0,0.5); }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; color: var(--gold); font-size: 0.8rem; font-weight: 800; }
        input, select { width: 100%; background: #111; border: 1px solid #333; padding: 15px; color: white; border-radius: 4px; }
        
        .time-slots { display: grid; grid-template-columns: repeat(auto-fill, minmax(90px, 1fr)); gap: 10px; margin-top: 15px; }
        .slot {
            padding: 12px; background: #222; text-align: center; cursor: pointer; border-radius: 4px;
            font-size: 0.9rem; transition: 0.3s; border: 1px solid transparent;
        }
        .slot:hover { border-color: var(--gold); }
        .slot.selected { background: var(--gold); color: var(--dark); font-weight: bold; }
        .slot.occupied { opacity: 0.2; cursor: not-allowed; text-decoration: line-through; }

        .upsell-box {
            background: rgba(197, 160, 89, 0.05); border: 1px dashed var(--gold);
            padding: 20px; margin: 25px 0; display: flex; align-items: center; justify-content: space-between;
        }

        footer { text-align: center; padding: 60px 20px; border-top: 1px solid #222; margin-top: 50px; }
    </style>
</head>
<body>

    <header>
        <div class="logo">BARBER CLUB</div>
    </header>

    <section class="hero">
        <h1 class="animate__animated animate__fadeInDown">Corte & Estilo <br> de Alto Nivel.</h1>
        <a href="#reservar" class="btn-gold">Reservar ahora</a>
    </header>

    <section class="section" id="servicios">
        <h2 style="text-align: center; font-size: 3rem; margin-bottom: 50px;">Servicios</h2>
        <div class="grid">
            <div class="service-card">
                <h3>CORTE TRADICIONAL</h3>
                <span class="service-price">$30.00</span>
                <p style="color: var(--gray); margin-bottom: 20px;">45 Minutos de precisión</p>
                <button class="btn-gold" onclick="setService('Corte Tradicional', 30)">Seleccionar</button>
            </div>
            <div class="service-card">
                <h3>BARBA COMPLETA</h3>
                <span class="service-price">$20.00</span>
                <p style="color: var(--gray); margin-bottom: 20px;">30 Minutos - Toalla caliente</p>
                <button class="btn-gold" onclick="setService('Barba Completa', 20)">Seleccionar</button>
            </div>
            <div class="service-card">
                <h3>COMBO PREMIUM</h3>
                <span class="service-price">$45.00</span>
                <p style="color: var(--gray); margin-bottom: 20px;">75 Minutos - Experiencia Total</p>
                <button class="btn-gold" onclick="setService('Combo Premium', 45)">Seleccionar</button>
            </div>
        </div>
    </section>

    <section class="section" id="reservar">
        <div class="booking-container">
            <h2 style="margin-bottom: 30px;">Finalizar Reserva</h2>
            <form id="bookingForm">
                <div class="grid" style="grid-template-columns: 1fr 1fr; margin-bottom: 0;">
                    <div class="form-group">
                        <label>Nombre</label>
                        <input type="text" id="nombre" required placeholder="Tu nombre">
                    </div>
                    <div class="form-group">
                        <label>WhatsApp</label>
                        <input type="tel" id="whatsapp" required placeholder="Tu número">
                    </div>
                </div>

                <div class="grid" style="grid-template-columns: 1fr 1fr; margin-bottom: 0;">
                    <div class="form-group">
                        <label>Servicio</label>
                        <input type="text" id="servicio_display" readonly style="background: #222; border-color: var(--gold);">
                    </div>
                    <div class="form-group">
                        <label>Fecha</label>
                        <input type="date" id="fecha" required>
                    </div>
                </div>

                <div class="form-group">
                    <label>Selecciona una Hora</label>
                    <div class="time-slots" id="slots-container">
                        </div>
                </div>

                <div class="upsell-box">
                    <span><strong>Añadir Mascarilla Negra (+ $10.00)</strong></span>
                    <input type="checkbox" id="upsell" style="width: 25px; height: 25px;">
                </div>

                <div style="text-align: right;">
                    <h3 id="total_txt" style="margin-bottom: 20px; font-size: 1.8rem;">Total: $0.00</h3>
                    <button type="submit" class="btn-gold" style="width: 100%;">Confirmar Cita</button>
                </div>
            </form>
        </div>
    </section>

    <footer>
        <p>BARBER CLUB CO. • CALLE ESTILO 404 • TEL: 555-BARBER</p>
    </footer>

    <script>
        // --- LÓGICA DE NEGOCIO ---
        let basePrice = 0;
        let selectedTime = null;
        const availableHours = ["10:00", "11:00", "12:00", "13:00", "15:00", "16:00", "17:00", "18:00"];

        // 1. Seleccionar Servicio
        function setService(name, price) {
            document.getElementById('servicio_display').value = name;
            basePrice = price;
            updateTotal();
            // Scroll suave al formulario
            document.getElementById('reservar').scrollIntoView();
            // Generar horarios al elegir servicio si hay fecha
            renderSlots();
        }

        // 2. Actualizar Total con Upsell
        function updateTotal() {
            let total = basePrice;
            if (document.getElementById('upsell').checked) total += 10;
            document.getElementById('total_txt').innerText = `Total: $${total.toFixed(2)}`;
        }

        document.getElementById('upsell').addEventListener('change', updateTotal);

        // 3. Renderizar Horarios
        function renderSlots() {
            const container = document.getElementById('slots-container');
            const fecha = document.getElementById('fecha').value;
            container.innerHTML = '';

            // Simulamos consulta de ocupados desde LocalStorage
            const reservasExistentes = JSON.parse(localStorage.getItem('reservas') || '[]');
            const horasOcupadasEnFecha = reservasExistentes
                .filter(r => r.fecha === fecha)
                .map(r => r.hora);

            availableHours.forEach(hora => {
                const isOccupied = horasOcupadasEnFecha.includes(hora);
                const slot = document.createElement('div');
                slot.className = `slot ${isOccupied ? 'occupied' : ''}`;
                slot.innerText = hora;

                if (!isOccupied) {
                    slot.onclick = () => {
                        document.querySelectorAll('.slot').forEach(s => s.classList.remove('selected'));
                        slot.classList.add('selected');
                        selectedTime = hora;
                    };
                }
                container.appendChild(slot);
            });
        }

        document.getElementById('fecha').addEventListener('change', renderSlots);

        // 4. Finalizar Reserva
        document.getElementById('bookingForm').onsubmit = function(e) {
            e.preventDefault();

            const nombre = document.getElementById('nombre').value;
            const whatsapp = document.getElementById('whatsapp').value;
            const servicio = document.getElementById('servicio_display').value;
            const fecha = document.getElementById('fecha').value;

            if (!servicio) return alert("Primero selecciona un servicio arriba.");
            if (!selectedTime) return alert("Selecciona una hora para tu cita.");

            const nuevaReserva = { nombre, whatsapp, servicio, fecha, hora: selectedTime };

            // GUARDAR (Local por ahora, listo para Supabase)
            const reservas = JSON.parse(localStorage.getItem('reservas') || '[]');
            reservas.push(nuevaReserva);
            localStorage.setItem('reservas', JSON.stringify(reservas));

            // FEEDBACK VISUAL
            alert(`¡Reserva Exitosa!\n\nCliente: ${nombre}\nServicio: ${servicio}\nFecha: ${fecha}\nHora: ${selectedTime}`);
            
            // Opcional: Redirigir a WhatsApp del dueño
            const msg = `Hola! Soy ${nombre}, agendé un ${servicio} el ${fecha} a las ${selectedTime}.`;
            window.open(`https://wa.me/521234567890?text=${encodeURIComponent(msg)}`);
            
            location.reload();
        };

        // Bloquear fechas pasadas en el calendario
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('fecha').setAttribute('min', today);
    </script>
</body>
</html>
